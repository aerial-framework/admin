<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical" xmlns:components="components.*"
			creationComplete="init()" width="800" height="600">
	
	<mx:ApplicationControlBar width="100%" verticalAlign="top" paddingBottom="8" paddingLeft="8" paddingRight="8" paddingTop="8">
		<mx:Image source="assets/images/aerial-logo.png" height="54" width="315"/>
		
		<mx:Spacer width="100%"/>
		
		<mx:Label id="versionStr" fontSize="12" fontWeight="bold"/>
	</mx:ApplicationControlBar>
	
	<mx:HBox width="100%" horizontalAlign="right">
		<components:ArchiveView width="400" height="300"/>
	</mx:HBox>
	
	<mx:Script>
		<![CDATA[	
			import air.update.ApplicationUpdaterUI;
			import air.update.events.UpdateEvent;
			
			import mx.controls.Alert;
			
			private var appUpdater:ApplicationUpdaterUI = new ApplicationUpdaterUI();
			
			private function init():void
			{
				setApplicationVersion();

				appUpdater.updateURL = "http://aerial-project.org/app-version.xml";
				appUpdater.addEventListener(UpdateEvent.INITIALIZED, onUpdate);
				appUpdater.addEventListener(ErrorEvent.ERROR, onError);
				
				appUpdater.isCheckForUpdateVisible = false;
				appUpdater.isFileUpdateVisible = false;
				appUpdater.isInstallUpdateVisible = false;
				
				appUpdater.initialize();
			}
			
			private function setApplicationVersion():void
			{
				var appXML:XML = NativeApplication.nativeApplication.applicationDescriptor;
				var ns:Namespace = appXML.namespace();
				versionStr.text = "Version " + appXML.ns::version;
			}
			
			private function onUpdate(event:UpdateEvent):void
			{
				appUpdater.checkNow();
			}
			
			private function onError(event:ErrorEvent):void
			{
				Alert.show(event.toString());
			}
		]]>
	</mx:Script>
	
	<mx:Style source="assets/styles/style.css"/>
</mx:WindowedApplication>